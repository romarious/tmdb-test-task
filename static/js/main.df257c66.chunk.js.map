{"version":3,"sources":["app/hooks.ts","features/movies/moviesApi.ts","features/movies/moviesSlice.ts","features/movies/MovieRow.tsx","common/components/Loader.tsx","features/movies/MoviesList.tsx","app/App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["useAppSelector","useSelector","page","a","fetch","response","json","data","status","Error","status_code","status_message","results","map","item","id","image","backdrop_path","title","rating","vote_average","year","release_date","substr","MoviesLoadingStatus","MOVIES_NS","moviesAdapter","createEntityAdapter","selectId","movie","createPage","getInitialState","IDLE","error","initialState","currentPage","loadingPage","pages","fetchMovies","createAsyncThunk","moviesReducer","createSlice","name","reducers","extraReducers","builder","addCase","pending","state","action","newPageNumber","meta","arg","LOADING","fulfilled","loadedPageNumber","addMany","payload","SUCCEEDED","rejected","message","FAILED","reducer","selectMoviesSubState","globalState","selectCurrentPageNumber","createSelector","selectLoadingPageNumber","selectCurrentPage","selectMoviesLoadStatus","selectMoviesLoadError","selectMoviesData","movieSelectors","selectMovies","getSelectors","selectAll","useStyles","makeStyles","root","flexGrow","fontSize","textSecondary","thumbnail","height","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","MovieRow","classes","Box","marginY","Grid","className","container","spacing","component","Paper","alignItems","xs","square","variant","direction","justify","Typography","color","align","minHeight","Loader","CircularProgress","pagination","margin","width","MoviesList","dispatch","useDispatch","movies","moviesLoadStatus","moviesLoadError","useEffect","Pagination","siblingCount","boundaryCount","count","shape","onChange","event","defaultPage","App","Container","store","configureStore","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.df257c66.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { Movie } from './Movie';\n\nconst API_KEY = 'xxx';\n\ntype MoviesResponseItem = {\n    id: string,\n    backdrop_path: string,\n    title: string,\n    vote_average: string,\n    release_date: string,\n};\n\nexport async function fetchMoviesRequest (page: number): Promise<Movie[]> {\n    const response = await fetch(`https://api.themoviedb.org/3/movie/top_rated?api_key=${API_KEY}&page=${page}`);\n    const data = await response.json();\n\n    if (response.status !== 200) {\n        throw new Error(`Failed to load movies, because of [${response.status}] ${data.status_code} ${data.status_message}`);\n    }\n\n    return data.results.map((item: MoviesResponseItem) => ({\n        id: item.id,\n        image: `https://image.tmdb.org/t/p/w300/${item.backdrop_path}`,\n        title: item.title,\n        rating: item.vote_average,\n        year: item.release_date.substr(0, 4)\n    }));\n}\n","import { ActionReducerMapBuilder, createAsyncThunk, createEntityAdapter, createSelector, createSlice, EntityState } from \"@reduxjs/toolkit\";\nimport { Movie } from './Movie';\nimport { fetchMoviesRequest } from './moviesApi';\n\nexport const MOVIES_NS = 'movies';\nexport const DEFAULT_PAGE = 1;\n\nexport enum MoviesLoadingStatus {\n    IDLE,\n    LOADING,\n    SUCCEEDED,\n    FAILED\n}\n\ntype MoviePage = {\n    data: EntityState<Movie>,\n    status: MoviesLoadingStatus,\n    error: string | null\n}\n\ntype MovieState = {\n    currentPage: number,\n    loadingPage: number | null,\n    pages: Record<number, MoviePage>\n}\n\nconst moviesAdapter = createEntityAdapter<Movie>({\n    selectId: (movie) => movie.id,\n    // sortComparer: (a, b) => a.rating - b.rating,\n});\n\nconst createPage = () => ({\n    data: moviesAdapter.getInitialState(),\n    status: MoviesLoadingStatus.IDLE,\n    error: null\n});\n\nconst initialState: MovieState = {\n    currentPage: DEFAULT_PAGE,\n    loadingPage: null,\n    pages: {\n        [DEFAULT_PAGE]: createPage()\n    }\n};\n\nexport const fetchMovies = createAsyncThunk(`${MOVIES_NS}/fetchMovies`, fetchMoviesRequest);\n\nconst moviesSlice = createSlice({\n    name: MOVIES_NS,\n    initialState: initialState,\n    reducers: {},\n    extraReducers: (builder: ActionReducerMapBuilder<MovieState>) => {\n        builder.addCase(fetchMovies.pending, (state: MovieState, action) => {\n            const newPageNumber = action.meta.arg;\n            if (!state.pages[newPageNumber]) {\n                state.pages[newPageNumber] = createPage();\n            }\n            const page = state.pages[newPageNumber];\n            page.status = MoviesLoadingStatus.LOADING;\n            state.loadingPage = newPageNumber;\n        });\n        builder.addCase(fetchMovies.fulfilled, (state: MovieState, action) => {\n            const loadedPageNumber = action.meta.arg;\n            const page = state.pages[loadedPageNumber];\n\n            moviesAdapter.addMany(page.data, action.payload);\n            page.status = MoviesLoadingStatus.SUCCEEDED;\n            if (state.loadingPage === loadedPageNumber) {\n                state.currentPage = loadedPageNumber;\n            }\n        });\n        builder.addCase(fetchMovies.rejected, (state: MovieState, action) => {\n            const loadedPageNumber = action.meta.arg;\n            const page = state.pages[loadedPageNumber];\n            page.error = action.error.message || 'Request failed';\n            page.status = MoviesLoadingStatus.FAILED;\n        });\n    }\n});\n\nexport const moviesReducer = moviesSlice.reducer;\n\nconst selectMoviesSubState = (globalState: { [MOVIES_NS]: MovieState }) => globalState[MOVIES_NS];\nconst selectCurrentPageNumber = createSelector([selectMoviesSubState], (state: MovieState) => state.currentPage);\nconst selectLoadingPageNumber = createSelector([selectMoviesSubState], (state: MovieState) => state.loadingPage);\nconst selectCurrentPage = createSelector([selectMoviesSubState, selectCurrentPageNumber], (state: MovieState, page) => state.pages[page]);\nconst selectMoviesLoadStatus = createSelector([selectCurrentPage], (state: MoviePage) => state.status);\nconst selectMoviesLoadError = createSelector([selectCurrentPage], (state: MoviePage) => state.error);\nconst selectMoviesData = createSelector([selectCurrentPage], (state: MoviePage) => state.data);\n\nconst { selectAll: selectMovies } = moviesAdapter.getSelectors(selectMoviesData);\n\nexport const movieSelectors = {\n    selectCurrentPageNumber,\n    selectLoadingPageNumber,\n    selectMovies,\n    selectMoviesLoadError,\n    selectMoviesLoadStatus,\n};\n","import { Box, Paper, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { FunctionComponent } from 'react';\nimport { Movie } from './Movie';\n\ntype MovieRowProps = {\n    data: Movie\n}\n\nconst useStyles = makeStyles({\n    root: {\n        flexGrow: 1\n    },\n    title: {\n        fontSize: '3vw'\n    },\n    textSecondary: {\n        fontSize: '2vw'\n    },\n    thumbnail: {\n        height: '10vw',\n        backgroundImage: (data: Movie) => `url(${data.image})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n    }\n});\n\nconst MovieRow: FunctionComponent<MovieRowProps> = ({ data }) => {\n    const classes = useStyles(data);\n\n    return (\n        <Box marginY={2}>\n            <Grid className={classes.root} container spacing={2} component={Paper} alignItems=\"stretch\">\n                <Grid item xs={3}>\n                    <Paper className={classes.thumbnail} square variant=\"outlined\"/>\n                </Grid>\n                <Grid item xs={9} container direction=\"column\" justify=\"space-between\">\n                    <Grid item>\n                        <Typography variant=\"body2\" className={classes.title}>\n                            {data.title}\n                        </Typography>\n                    </Grid>\n                    <Grid item container direction=\"row\" justify=\"space-between\">\n                        <Grid item>\n                            <Typography variant=\"body2\" className={classes.textSecondary} color=\"textSecondary\">\n                                Year: {data.year}\n                            </Typography>\n                        </Grid>\n                        <Grid item>\n                            <Typography variant=\"body2\" className={classes.textSecondary} color=\"textSecondary\" align=\"right\">\n                                Rating: {data.rating}\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n};\n\nexport default MovieRow;\n","import { CircularProgress, Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { FunctionComponent } from \"react\";\n\nconst useStyles = makeStyles({\n    root: {\n        flexGrow: 1,\n        minHeight: '80vh'\n    }\n});\n\nconst Loader: FunctionComponent = () => {\n    const classes = useStyles();\n\n    return (\n        <Grid\n            className={classes.root}\n            container\n            direction=\"row\"\n            justify=\"center\"\n            alignItems=\"center\"\n        >\n            <CircularProgress />\n        </Grid>\n    );\n}\n\nexport default Loader;\n","import { ChangeEvent, FunctionComponent, useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { movieSelectors, fetchMovies, MoviesLoadingStatus, DEFAULT_PAGE } from './moviesSlice';\nimport MovieRow from './MovieRow';\nimport Loader from '../../common/components/Loader';\nimport { Box, Typography } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles({\n    pagination: {\n        margin: '0 auto',\n        width: 'fit-content'\n    }\n});\n\nconst MoviesList: FunctionComponent = () => {\n    const classes = useStyles();\n\n    const dispatch = useAppDispatch();\n    const currentPage = useAppSelector(movieSelectors.selectCurrentPageNumber);\n    const movies   = useAppSelector(movieSelectors.selectMovies);\n    const moviesLoadStatus = useAppSelector(movieSelectors.selectMoviesLoadStatus);\n    const moviesLoadError = useAppSelector(movieSelectors.selectMoviesLoadError);\n\n    useEffect(() => {\n        if (moviesLoadStatus === MoviesLoadingStatus.IDLE) {\n            dispatch(fetchMovies(currentPage));\n        }\n    }, [moviesLoadStatus, currentPage, dispatch]);\n\n    const handlePaginationChange = (event: ChangeEvent<unknown>, page: number) => {\n        dispatch(fetchMovies(page))\n    };\n\n    return (\n        <>\n            <Pagination\n                className={classes.pagination}\n                siblingCount={2}\n                boundaryCount={2}\n                count={25}\n                shape=\"rounded\"\n                onChange={handlePaginationChange}\n                page={currentPage}\n                defaultPage={DEFAULT_PAGE}\n            />\n            {\n                (moviesLoadStatus === MoviesLoadingStatus.IDLE || moviesLoadStatus === MoviesLoadingStatus.LOADING) &&\n                    <Loader />\n            }\n            {\n                (moviesLoadStatus === MoviesLoadingStatus.FAILED) &&\n                    <Typography variant=\"h3\" align=\"center\" color=\"error\">\n                        { moviesLoadError || 'Something went wrong...'}\n                    </Typography>\n            }\n            {\n                (moviesLoadStatus === MoviesLoadingStatus.SUCCEEDED) &&\n                    <Box>{\n                        movies.map(movie => <MovieRow key={movie.id} data={movie} />)\n                    }</Box>\n            }\n        </>\n    );\n};\n\nexport default MoviesList;\n","import { FunctionComponent } from 'react';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\n\nimport MoviesList from '../features/movies/MoviesList';\n\nconst App: FunctionComponent = () => {\n  return (\n    <Container>\n      <Typography variant=\"h3\" component=\"h1\" align=\"center\">\n        TMDB top 500 movies\n      </Typography>\n      <MoviesList />\n    </Container>\n  );\n};\n\nexport default App;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport { moviesReducer, MOVIES_NS } from '../features/movies/moviesSlice';\n\nexport const store = configureStore({\n  reducer: {\n    [ MOVIES_NS ]: moviesReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}